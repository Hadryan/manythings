version: '3.4'
services:

    elasticsearch:
        image: elasticsearch:7.2.0
        ports:
            - ${ELASTICSEARCH_PORT-9200}:9200
        environment:
            - discovery.type=single-node
            # - discovery.seed_hosts=es02
            # - cluster.initial_master_nodes=es01,es02
            # - cluster.name=docker-cluster
            # - bootstrap.memory_lock=true
            # - "ES_JAVA_OPTS=-Xms512m -Xmx512m"
        # ulimits:
        #     memlock:
        #       soft: -1
        #       hard: -1
        volumes:
            - ${HUMBLE_DATA}/elasticsearch:/usr/share/elasticsearch/data

    kibana:
        image: kibana:7.2.0
        ports:
            - ${KIBANA_PORT-5601}:5601
        environment:
            ELASTICSEARCH_HOSTS: ${ELASTICSEARCH_HOST-http://elasticsearch:9200}
        # volumes:
        #     - ./kibana.yml:/usr/share/kibana/config/kibana.yml